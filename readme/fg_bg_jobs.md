
在 Unix/Linux 系统中，`fg`、`bg` 和 `jobs` 是用于管理后台进程（作业）的常用命令，主要用于将进程在前台和后台之间切换，以及查看当前终端中运行的作业状态。以下是它们的详细用法和区别：


### **1. `jobs` 命令：查看当前终端的后台作业**
#### **作用**  
列出当前终端中启动的所有后台作业（包括暂停的作业和正在运行的作业）。

#### **常用选项**  
- **`jobs`**：默认列出所有作业，显示作业编号、状态和命令。  
  ```bash
  [1]   Running                 sleep 100 &  # 作业编号1，正在运行
  [2]-  Stopped                 vim test.txt  # 作业编号2，已暂停（- 表示最近的后台作业）
  [3]+  Stopped                 top           # 作业编号3，已暂停（+ 表示当前作业）
  ```  
  - **状态说明**：  
    - `Running`：正在后台运行。  
    - `Stopped`：被暂停（通常由 `Ctrl+Z` 触发）。  
    - `Done`：已完成（但未被移除出作业列表）。  
  - **`+` 和 `-` 标记**：  
    - `+`：表示当前默认作业（执行 `fg`/`bg` 时若不指定作业编号，默认操作该作业）。  
    - `-`：表示次默认作业（仅次于 `+` 标记的作业）。  

- **`jobs -l`**：显示作业的 PID（进程ID）。  
  ```bash
  [1]  23456   Running                 sleep 100 &
  ```

- **`jobs -r`**：仅列出正在运行的后台作业。  
- **`jobs -s`**：仅列出暂停（Stopped）的作业。


### **2. `bg` 命令：将作业切换到后台运行**
#### **作用**  
- 将**暂停（Stopped）的作业**恢复为**后台运行状态**。  
- 若作业原本在前台运行，需先用 `Ctrl+Z` 暂停，再用 `bg` 切换到后台。  

#### **语法**  
```bash
bg [作业编号]  # 若不指定编号，默认操作带有 `+` 标记的作业
```

#### **示例**  
1. **暂停前台作业并切换到后台运行**：  
   ```bash
   $ vim test.txt       # 前台运行 vim（按 `Ctrl+Z` 暂停）
   [1]+  Stopped                 vim test.txt
   $ bg 1                 # 将作业1恢复为后台运行
   [1]+  vim test.txt &
   ```

2. **直接后台运行命令**（无需暂停）：  
   在启动命令时添加 `&`，直接让其在后台运行（此时无需 `bg`）：  
   ```bash
   $ sleep 100 &         # 直接后台运行，自动成为作业1
   [1]  23456
   ```


### **3. `fg` 命令：将作业切换到前台运行**
#### **作用**  
将后台作业（运行中或暂停的）切换到前台，使其占用当前终端。前台作业会阻塞终端，直至结束或再次被暂停（`Ctrl+Z`）。

#### **语法**  
```bash
fg [作业编号]  # 若不指定编号，默认操作带有 `+` 标记的作业
```

#### **示例**  
1. **将暂停的后台作业切换到前台**：  
   ```bash
   $ Ctrl+Z         # 暂停当前前台作业（假设为作业2）
   [2]+  Stopped                 top
   $ fg 2           # 将作业2切换到前台继续运行
   ```

2. **将正在运行的后台作业切换到前台**：  
   ```bash
   $ sleep 100 &    # 后台运行（作业1）
   [1]  23456
   $ fg 1           # 切换到前台，终端会被 sleep 阻塞直至结束
   ```


### **常用操作场景**
#### **场景1：启动后台作业**  
```bash
$ command &       # 直接加 &，后台运行，作业编号自动分配
```

#### **场景2：暂停前台作业并转为后台运行**  
```bash
$ command         # 前台运行
Ctrl+Z           # 暂停作业（状态变为 Stopped）
$ bg %作业编号    # 恢复为后台运行
```

#### **场景3：查看所有后台作业**  
```bash
$ jobs            # 列出所有作业及状态
```

#### **场景4：切换作业到前台/后台**  
```bash
$ fg %作业编号     # 切换到前台
$ bg %作业编号     # 恢复后台运行（针对暂停的作业）
```


### **注意事项**  
1. **作业编号 vs. PID**：  
   - `jobs` 显示的是**作业编号**（如 `[1]`），而 `ps` 命令显示的是**PID**（进程ID）。  
   - 操作时需用 `%作业编号` 或直接用编号（如 `%1` 或 `1`）。  

2. **终端关闭的影响**：  
   - 终端关闭后，默认会杀死所有后台作业（除非使用 `nohup` 或 `disown` 命令守护进程）。  

3. **快捷键补充**：  
   - `Ctrl+C`：终止前台作业。  
   - `Ctrl+Z`：暂停前台作业（放入后台，状态为 Stopped）。  

通过 `fg`、`bg` 和 `jobs` 命令，可以灵活管理终端中的作业，避免前台进程阻塞终端，提高多任务处理效率。