Linux day12 02

### 信号掩码（屏蔽集合）
#### 1. 位图表示
信号掩码是一个位图，其中的每一位对应一个特定的信号编号。操作系统通常会为每个信号分配一个唯一的编号，位图中相应位置的位状态（0 或 1）表示该信号是否被阻塞。如果某一位被设置为 1，意味着对应的信号被当前进程屏蔽，也就是该信号不会立即被传递给进程进行处理；若为 0，则表示该信号未被屏蔽，可以正常传递给进程。

#### 2. 位图特性的优势
- **高效存储**：使用位图可以用较少的内存空间来表示大量的信号状态。因为每个信号只占用一个二进制位，所以即使系统支持很多信号，信号掩码所占用的内存空间也相对较小。
- **快速操作**：位图的位运算操作（如与、或、非等）非常高效。通过位运算，可以快速地设置、清除或检查某个信号是否被屏蔽。例如，要屏蔽一个信号，只需将对应位设置为 1；要解除屏蔽，将对应位设置为 0。

#### 3. 实际作用
信号掩码主要用于控制信号的传递时机。在某些情况下，进程可能不希望被特定的信号中断，例如在执行关键代码段时。此时，进程可以通过修改信号掩码来屏蔽这些信号，待关键代码执行完毕后，再解除屏蔽，让信号正常传递。

### 未决信号集合
#### 1. 位图表示
未决信号集合同样是一个位图，每一位也对应一个信号编号。如果某一位为 1，说明对应的信号已经被发送给进程，但由于该信号被屏蔽（在信号掩码中对应位为 1），所以暂时无法被处理，处于未决状态；若为 0，则表示该信号没有未决情况，要么没有被发送，要么已经被处理。

#### 2. 位图特性的优势
- **高效记录**：位图能够高效地记录哪些信号处于未决状态。通过位图的位状态，可以快速判断某个信号是否未决，而不需要遍历整个信号列表。
- **与信号掩码协同工作**：未决信号集合和信号掩码结合使用，通过位图的位运算可以方便地管理信号的处理顺序。当信号掩码发生变化，某个信号的屏蔽被解除时，系统可以通过检查未决信号集合，快速确定是否有该信号处于未决状态，并及时进行处理。

#### 3. 实际作用
未决信号集合用于记录那些已经发送但由于屏蔽而暂时无法处理的信号。当信号屏蔽被解除时，系统会根据未决信号集合来决定哪些信号需要立即传递给进程进行处理，确保信号不会丢失。

### 两者的关系
信号掩码和未决信号集合通过位图相互协作，共同管理信号的处理。信号掩码决定了哪些信号会被阻塞，而未决信号集合记录了被阻塞信号的未决情况。当一个信号被发送时，系统首先检查信号掩码，如果该信号被屏蔽，则将未决信号集合中对应位设置为 1；当信号屏蔽被解除时，系统检查未决信号集合，若对应位为 1，则将该信号传递给进程处理，并将未决信号集合中对应位清零。

![alt text](<屏幕截图 2025-04-22 151122.png>)
![alt text](<屏幕截图 2025-04-20 145304.png>)