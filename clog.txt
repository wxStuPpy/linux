不要把阻塞放在while循环中

1.read磁盘文件不阻塞 read设备文件(IO)会阻塞 read管道会阻塞
2.管道仅有一端被打开时阻塞 必须同时打开读写端才不会阻塞
3.写管道不会阻塞
4.W端先关闭 R端正常退出 相当于读到了EOF R端先关闭 W端会收到SIGPIPE信号 程序异常中止
所以代码中先关闭写端 读端后关闭